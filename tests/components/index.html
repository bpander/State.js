<!DOCTYPE html>
<html>
<head>
    <title>Components test</title>
</head>
<body>

    <div id="js-app">

        <input data-out="{ onkeydown: state.onkeydown.bind(this) }" />

        <ul data-each="state.todos" data-key="loop.val.id">
            <li data-component="TodoComponent" data-state="{
                todo: loop.val,
                onRemoveClick: state.removeTodo.bind(this, loop.val),
                onCheckboxChange: state.toggleTodo.bind(this, loop.val)
            }">
                <input type="checkbox" data-out="{
                    checked: state.todo.complete,
                    onchange: state.onCheckboxChange
                }" />
                <span data-out="{ textContent: state.todo.text }"></span>
                <button data-out="{ onclick: state.onRemoveClick }">&times;</button>
            </li>
        </ul>

        <div data-if="state.todos.length === 0">
            No todos
        </div>

    </div>

    <script src="../../bower_components/requirejs/require.js"></script>
    <script>
        require([
            '../../src/Lib',
            '../../src/Component',
            './TodoApp',
            './TodoComponent'
        ], function (
            Lib,
            Component,
            TodoApp,
            TodoComponent
        ) {

            var element = document.getElementById('js-app');

            Lib.componentMap['TodoApp'] = TodoApp;
            Lib.componentMap['TodoComponent'] = TodoComponent;

            window.app = Lib.mount(element, TodoApp, {
                todos: [
                    { id: '1', text: 'Buy milk', complete: false },
                    { id: '2', text: 'Make bed', complete: true }
                ]
            });
        });
    </script>
</body>
</html>